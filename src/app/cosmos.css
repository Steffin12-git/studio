
@function random_range($min, $max) {
    $rand: random();
    $random_range: $min + floor($rand * (($max - $min) + 1));
    @return $random_range;
  }
  
  .stars {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 120%;
    transform: rotate(-45deg);
  }
  
  .stars {
    --star-color: hsl(var(--primary));
    --star-tail-length: 6em;
    --star-tail-height: 2px;
    --star-width: calc(var(--star-tail-length) / 6);
    --fall-duration: 9s;
    --tail-fade-duration: 0.5s;
    
    background-image:
      radial-gradient(ellipse at bottom, rgba(0,0,0,0.6) 40%, transparent 80%);
  }
  
  .stars::before, .stars::after {
    position: absolute;
    content: '';
    top: 0;
    left: calc(var(--star-width) / -2);
    width: var(--star-width);
    height: 100%;
    background-image:
      linear-gradient(to bottom, transparent 0%, var(--star-color) 100%);
    background-size: 100% var(--star-tail-length);
    background-repeat: repeat-y;
    background-position: center;
    
    animation:
      fall var(--fall-duration) linear infinite,
      tail-fade var(--tail-fade-duration) ease-out infinite;
  }
  
  .stars::after {
    margin-left: 30%;
    animation-delay: 0.1s;
    --star-tail-length: 4em;
  }
  
  
  /* Layer 2 */
  .stars2 {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -10;
  }
  
  .stars2 {
    background: transparent;
    --speed: 50s;
    --size: 1px;
  }
  
  .stars2, .stars3 {
    background-image:
      radial-gradient(var(--size) var(--size) at 20% 30%, hsl(var(--foreground)), transparent),
      radial-gradient(var(--size) var(--size) at 40% 60%, hsl(var(--primary)), transparent),
      radial-gradient(var(--size) var(--size) at 70% 80%, hsl(var(--foreground)), transparent),
      radial-gradient(var(--size) var(--size) at 90% 40%, hsl(var(--primary)), transparent),
      radial-gradient(var(--size) var(--size) at 10% 85%, hsl(var(--foreground)), transparent),
      radial-gradient(var(--size) var(--size) at 55% 25%, hsl(var(--primary)), transparent),
      radial-gradient(var(--size) var(--size) at 82% 15%, hsl(var(--foreground)), transparent);
    
    animation: move-background var(--speed) linear infinite;
  }
  
  .stars3 {
    --speed: 100s;
    --size: 2px;
    background-position: 0 -100vh;
  }
  
  
  @keyframes fall {
    to {
      transform: translateY(110vh);
    }
  }
  
  @keyframes tail-fade {
    0%, 50% {
      opacity: 1;
    }
    70%, 100% {
      opacity: 0;
    }
  }
  
  @keyframes move-background {
    from { background-position: 0 0; }
    to { background-position: 0 100vh; }
  }
  
  @keyframes twinkle {
    0% { transform: scale(1); opacity: 0.5; }
    50% { transform: scale(1.5); opacity: 1; }
    100% { transform: scale(1); opacity: 0.5; }
  }
  
  .stars, .stars2, .stars3 {
    -webkit-animation-timing-function: linear;
    animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
    animation-iteration-count: infinite;
  }
